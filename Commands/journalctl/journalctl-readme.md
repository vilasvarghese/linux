Markdown

# journalctl: A Detailed Tutorial for Linux System Logging

`journalctl` is a command-line utility used to query and display messages from the systemd journal. The systemd journal is a centralized logging system that collects and stores log data from various sources, including the kernel, user-space processes, and syslog. It offers significant advantages over traditional syslog, such as structured logging, indexing, and the ability to view logs from previous boots.

This tutorial will provide a comprehensive guide to using `journalctl`, covering its basic usage, advanced filtering options, and practical examples for effective system monitoring and troubleshooting.

---

## 1. Basic Usage

The simplest way to view all available journal entries is by running `journalctl` without any arguments:

```bash
journalctl
This will display logs in chronological order, with the oldest entries at the top. The output is usually piped through less, allowing you to scroll, search, and navigate through the logs.

Key less commands for navigation:

Space or Page Down: Scroll down a page.

b or Page Up: Scroll up a page.

G: Go to the end of the logs.

g: Go to the beginning of the logs.

/pattern: Search forward for a pattern.

?pattern: Search backward for a pattern.

n: Go to the next match of the search pattern.

N: Go to the previous match of the search pattern.

q: Quit less.

2. Viewing Recent Logs
To view logs from the end, similar to tail -f, use the -f (follow) option:

Bash

journalctl -f
This will continuously display new log entries as they are generated. Press Ctrl+C to stop following.

To view a specific number of recent entries, use the -n option:

Bash

journalctl -n 20
This displays the last 20 log entries. You can combine -n with -f to follow the last N entries:

Bash

journalctl -n 50 -f
3. Filtering Logs by Time
journalctl provides powerful options for filtering logs by time.

3.1. Since and Until
Use --since and --until to specify a time range. You can use various formats for time:

Absolute time: "YYYY-MM-DD HH:MM:SS" (e.g., "2025-07-27 10:00:00")

Relative time: "today", "yesterday", "now", "-5min", "-1h", "-3d", "-1week", etc.

Examples:

Logs from today:

Bash

journalctl --since "today"
Logs from yesterday:

Bash

journalctl --since "yesterday" --until "today"
Logs from the last 10 minutes:

Bash

journalctl --since "-10min"
Logs from 2:00 PM to 3:00 PM on July 27, 2025:

Bash

journalctl --since "2025-07-27 14:00:00" --until "2025-07-27 15:00:00"
Logs since the last boot:

Bash

journalctl -b
3.2. Specific Boots
Each boot creates a new journal entry. You can view logs from a specific boot using the -b option with an offset:

journalctl -b 0: Logs from the current boot. (Same as journalctl -b)

journalctl -b -1: Logs from the previous boot.

journalctl -b -2: Logs from the boot before the previous one.

To list all available boots and their timestamps, use:

Bash

journalctl --list-boots
This will show a table with boot IDs, system IDs, and corresponding timestamps. You can then use the boot ID (first column) with -b to view logs from that specific boot:

Bash

journalctl -b c032...  # Replace with an actual boot ID
4. Filtering Logs by Unit (Service), Process, or Executable
4.1. By Systemd Unit
To view logs for a specific systemd service (unit), use the -u option:

Bash

journalctl -u sshd.service
You can omit the .service extension for common services:

Bash

journalctl -u nginx
Combine with f for following:

Bash

journalctl -u apache2 -f
4.2. By Process ID (PID) or User ID (UID)
To view logs from a specific process, use _PID= or _UID=:

Bash

journalctl _PID=1234
journalctl _UID=1000
4.3. By Executable
To view logs generated by a specific executable (program name), use _EXE=:

Bash

journalctl _EXE=/usr/sbin/sshd
4.4. By Kernel Message
To view only kernel messages, use the -k or --dmesg option:

Bash

journalctl -k
This is similar to the dmesg command but provides journalctl's filtering and timestamp capabilities.

5. Filtering Logs by Priority/Severity
journalctl allows filtering by log priority (severity level), similar to syslog levels. Priorities range from 0 (emerg) to 7 (debug).

0: emerg (System is unusable)

1: alert (Action must be taken immediately)

2: crit (Critical conditions)

3: err (Error conditions)

4: warning (Warning conditions)

5: notice (Normal but significant condition)

6: info (Informational messages)

7: debug (Debug-level messages)

Use the -p option with the priority level or name:

Bash

journalctl -p err
This will show all messages with priority err or higher (i.e., emerg, alert, crit, err).

To view only messages of a specific priority, you can specify a range:

Bash

journalctl -p "warning..err"
This will show messages with priority warning, notice, info, debug, but not emerg, alert, crit, err.
No, actually, this shows only warning and error messages.
To specify multiple priorities in a single search, you could use additional filtering, but journalctl -p is designed for "level and above."

Therefore, to show only messages of priority "warning", you would need to combine it with another filter, or use tools like grep:

Bash

journalctl -p warning | grep -E 'priority=4$' # (Not ideal, as output changes based on formatting)
The typical use is to see messages at or above a certain level, e.g., "show me all errors and more severe messages."

6. Output Formatting
journalctl can present logs in various formats, which is useful for scripting or parsing. Use the -o (output) option:

short (default): Default syslog-like output.

short-precise: Similar to short but with microsecond precision timestamps.

short-iso: ISO 8601 formatted timestamps.

json: Full JSON output, one entry per line.

json-pretty: Pretty-printed JSON output.

json-sse: JSON output wrapped in Server-Sent Events.

cat: Shows only the message field, without metadata.

verbose: Shows all fields found in the journal, including internal ones.

Examples:

Bash

journalctl -o json-pretty -u sshd.service --since "yesterday"
journalctl -o cat -u systemd --since "-1h"
7. Journal Size and Management
The systemd journal stores logs in /var/log/journal/. Over time, this directory can grow large.

7.1. Check Journal Disk Usage
Bash

journalctl --disk-usage
7.2. Limit Journal Size
You can limit the journal size by time or by size. This is often configured in /etc/systemd/journald.conf.

By size: SystemMaxUse=500M (e.g., limit to 500 MB)

By time: MaxFileSec=1month (e.g., keep logs for max 1 month)

After modifying journald.conf, restart the systemd-journald service:

Bash

sudo systemctl restart systemd-journald
7.3. Clean Old Journal Entries Manually
To clean up old journal entries immediately, you can use --vacuum-size or --vacuum-time:

Delete entries until the total size is below a certain limit:

Bash

sudo journalctl --vacuum-size=1G
Delete entries older than a certain time:

Bash

sudo journalctl --vacuum-time=7d
8. Remote Journal Access
journalctl can also access journals on remote machines using SSH.

Bash

journalctl -H username@hostname
You can combine this with all other journalctl options.

9. Common Troubleshooting Scenarios with journalctl
9.1. Debugging a Failed Service
If a service is failing to start or behaving unexpectedly:

Bash

sudo systemctl status my-app.service # First check status
journalctl -u my-app.service --since "today" --no-pager # View logs for the service today
journalctl -u my-app.service -f # Follow logs as you try to restart the service
9.2. Investigating Boot Problems
If your system is not booting correctly or experiencing issues shortly after boot:

Bash

journalctl -b -1 -p err # Show errors from the previous boot
journalctl -b -p warning..crit # Show warnings, errors, critical, alerts, and emergencies from current boot
journalctl -k --since "yesterday" # Kernel messages from yesterday
9.3. Checking for Network Issues
Bash

journalctl -u NetworkManager.service --since "-1h"
journalctl -u systemd-networkd.service --since "-1h"
journalctl -u dhcpcd.service --since "today"
9.4. Security Auditing
While not a full audit tool, journalctl can help identify suspicious activity:

Bash

journalctl -u sshd.service --since "-1d" | grep "Failed password"
journalctl -p err --since "-1week" # Look for system-wide errors
```
